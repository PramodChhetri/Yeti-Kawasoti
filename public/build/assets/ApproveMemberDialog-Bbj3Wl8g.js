import{j as e}from"./app-GgFLoYAH.js";import{D as u,b as g,e as N,c as v}from"./dialog-ADOl-j88.js";import{B as a}from"./button-BiqH3d5r.js";import{C as n,a as o,b as c,d as l,c as b}from"./card-Cdkcj2Gi.js";import{B as m}from"./badge-stK5yr_a.js";import{h as i}from"./moment-Cl4UOzQZ.js";import{g as y,f as _,a as D,d as M}from"./member-service-BwcZxyWF.js";import{t as x}from"./use-toast-CRgGk0dw.js";import{n as w}from"./index.es-3j1CAHIA.js";import"./index-CV7mMyMG.js";import"./index-JWUtb-qc.js";import"./index-GknmoB8o.js";import"./index-Dr4bQ6Np.js";import"./x-DrxCXUfX.js";import"./createLucideIcon-CxmtV3NG.js";import"./utils-C-Zvzyq5.js";import"./index-ClrB7sDw.js";import"./index-Bb4qSo10.js";function q({member:s,refetch:d,open:p,onClose:r}){const h=async()=>{try{await D(s.id),d(),x({title:"Member Approved",description:"The member has been approved."})}catch{x({title:"Error",description:"Something went wrong",variant:"destructive"})}},f=async()=>{try{await M(s.id),r(),d()}catch{}},t=y(s);return e.jsx(u,{open:p,onOpenChange:r,children:e.jsx(g,{className:"max-w-[550px] max-h-[99vh] overflow-auto",children:e.jsxs(n,{className:"bg-transparent border-none shadow-none",children:[e.jsxs(o,{className:"py-0 pb-2 text-center",children:[e.jsx(c,{children:s.name}),e.jsx(N,{children:s.address})]}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("img",{src:s.photo,className:"max-w-full max-h-48 mx-auto rounded-lg my-2"})}),e.jsx(v,{className:"m-0 col-span-4",children:e.jsx(n,{className:"border-none shadow-none",children:e.jsx(l,{children:e.jsxs("div",{className:"flex flex-wrap mb-2 justify-between gap-y-2",children:[e.jsxs("div",{className:"flex items-center mr-6",children:[e.jsx("span",{className:"font-semibold text-muted-foreground mr-2",children:"Father:"}),e.jsx("span",{className:"text-card-foreground",children:s.father_name})]}),e.jsxs("div",{className:"flex items-center mr-6",children:[e.jsx("span",{className:"font-semibold text-muted-foreground mr-2",children:"Phone:"}),e.jsx("span",{className:"text-card-foreground",children:s.phone})]}),e.jsxs("div",{className:"flex items-center mr-6",children:[e.jsx("span",{className:"font-semibold text-muted-foreground mr-2",children:"Gender:"}),e.jsx("span",{className:"text-card-foreground",children:s.gender})]}),e.jsxs("div",{className:"flex items-center mr-6",children:[e.jsx("span",{className:"font-semibold text-muted-foreground mr-2",children:"Marital Status:"}),e.jsx("span",{className:"text-card-foreground",children:s.marital_status})]}),e.jsxs("div",{className:"flex items-center mr-6",children:[e.jsx("span",{className:"font-semibold text-muted-foreground mr-2",children:"DOB:"}),e.jsx("span",{className:"text-card-foreground",children:new Date(s.date_of_birth).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold text-muted-foreground mr-2",children:"Preferred Time:"}),e.jsx("span",{className:"text-card-foreground",children:s.preferred_time})]})]})})})})]}),e.jsx("div",{children:e.jsxs(n,{className:"bg-muted",children:[e.jsxs(o,{className:"pb-1 text-center",children:[e.jsx(c,{children:"Membership Information"}),e.jsx(b,{className:"text-card-foreground",children:s.membership_package.package_name.toLowerCase().indexOf("lifetime")!==-1?e.jsx("span",{children:"Lifetime Membership"}):s.membership_package.package_name.toLowerCase().indexOf("aerobic")!==-1?e.jsx("span",{children:"Aerobic/Gym/Zumba"}):s.end_date!==null?e.jsxs("span",{children:[i(s.start_date).format("MMM Do YYYY")," to ",i(s.end_date).format("MMM Do YYYY")]}):e.jsxs("span",{children:["From ",i(s.start_date).format("MMM Do YYYY")]})})]}),e.jsxs(l,{children:[e.jsxs("div",{className:"mb-2 mr-6",children:[e.jsx("span",{className:"font-semibold text-muted-foreground mr-2",children:"Membership Type:"}),e.jsx("span",{className:"text-card-foreground",children:s.membership_package.package_name})]}),e.jsxs("div",{className:"mb-2 mr-6",children:[e.jsx("span",{className:"font-semibold text-muted-foreground mr-2",children:"Subscription Status:"}),e.jsx("span",{className:"text-card-foreground",children:e.jsx(m,{variant:t.variant,className:t.className,children:t.text})})]}),e.jsxs("div",{className:"mb-2 mr-6",children:[e.jsx("span",{className:"font-semibold text-muted-foreground mr-2",children:"Expiry Date:"}),e.jsx("span",{className:"text-card-foreground",children:_(s.payment_expiry_date)})]}),e.jsxs("div",{className:"mb-2 mr-6",children:[e.jsx("span",{className:"font-semibold text-muted-foreground mr-2",children:"Payment:"}),e.jsx("span",{className:"text-card-foreground",children:s.payments[0].bill_number>0||!s.payments[0].payment_proof?e.jsxs(m,{children:["Bill No. ",s.payments[0].bill_number]}):e.jsx("a",{target:"_blank",href:s.payments[0].payment_proof,children:e.jsx(a,{variant:"link",children:"View Receipt"})})})]}),e.jsxs("div",{className:"mb-2 mr-6",children:[e.jsx("span",{className:"font-semibold text-muted-foreground mr-2",children:"Amount:"}),e.jsxs("span",{className:"text-card-foreground",children:["Rs ",w(s.payments[0].amount)]})]})]})]})}),e.jsxs("div",{className:"flex justify-between mt-4 gap-2",children:[e.jsx(a,{variant:"secondary",onClick:r,children:"Cancel"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(a,{variant:"ghost",className:"text-destructive hover:text-destructive",onClick:f,children:"Delete"}),e.jsx(a,{onClick:h,children:"Approve"})]})]})]})})})}export{q as ApproveMemberDialog};
