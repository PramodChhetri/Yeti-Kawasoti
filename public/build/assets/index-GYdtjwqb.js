var Y=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var i=(s,t,e)=>(Y(s,t,"read from private field"),e?e.call(s):t.get(s)),h=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},l=(s,t,e,r)=>(Y(s,t,"write to private field"),r?r.call(s,e):t.set(s,e),e);var f=(s,t,e)=>(Y(s,t,"access private method"),e);import{S as Et,s as Z,n as wt,i as pt,f as mt,t as Tt,h as It,k as Qt,l as bt,o as jt,r as C,u as Dt,j as n,b as Ft}from"./app-CeHawWK7.js";import{C as Ut,a as Pt,b as Bt,d as Lt}from"./card-m7sUhe83.js";import{T as Mt,f as At,a as Nt,b as vt,c as R,d as Ht,e as j}from"./table-B4ogmpzY.js";import{A as _t}from"./AuthenticatedLayout-vtNVav6n.js";import kt from"./CreateDialog-F5jt9MRY.js";import{B as xt}from"./badge-BO37gUnS.js";import Vt from"./index-DOM7U2Bo.js";import"./utils-CRrpu23W.js";import"./GlobalLayout-Cfd5osqe.js";import"./toaster-B8JIrNCo.js";import"./index-B_ku7PSA.js";import"./index-DD1TA57H.js";import"./index-JWIwkwlr.js";import"./x-CcTwlrmH.js";import"./createLucideIcon-T09ZsU69.js";import"./index-Bb4qSo10.js";import"./use-toast-TciExXPv.js";import"./sheet-BX0QfvEQ.js";import"./index-DmAnl5gc.js";import"./index-C9wzw3Ty.js";import"./button-CBFDvSSe.js";import"./index-Clynsdhc.js";import"./dropdown-menu-d9Baeyf4.js";import"./index-BBHitacn.js";import"./index-CRFetRKe.js";import"./check-U2lRsC70.js";import"./door-open-DwydA0Yd.js";import"./dialog-vdBOxT0G.js";import"./input-iG9gLFRb.js";import"./label-DZHSVrJR.js";import"./select-CrO88sMk.js";import"./SingleImageUploader-DYwZ3WCh.js";import"./InputError-B_B1jo66.js";import"./moment-Cl4UOzQZ.js";import"./EditStaffDialog-DBdospcb.js";import"./DisableStaffDialog-D9ymM8Wt.js";import"./ViewStaffDialog-C2w-gQ6o.js";import"./StaffAccountsDialog-B2ahG-AT.js";import"./textarea-CDpx1joq.js";import"./format-CE4V3joc.js";import"./ellipsis-C43iJ8Cm.js";var b,o,M,m,w,F,y,A,U,P,T,I,S,B,Q,L,N,$,H,tt,_,et,k,st,V,it,W,rt,z,nt,K,Ct,Rt,Wt=(Rt=class extends Et{constructor(t,e){super();h(this,Q);h(this,N);h(this,H);h(this,_);h(this,k);h(this,V);h(this,W);h(this,z);h(this,K);h(this,b,void 0);h(this,o,void 0);h(this,M,void 0);h(this,m,void 0);h(this,w,void 0);h(this,F,void 0);h(this,y,void 0);h(this,A,void 0);h(this,U,void 0);h(this,P,void 0);h(this,T,void 0);h(this,I,void 0);h(this,S,void 0);h(this,B,new Set);this.options=e,l(this,b,t),l(this,y,null),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,o).addObserver(this),yt(i(this,o),this.options)?f(this,Q,L).call(this):this.updateResult(),f(this,k,st).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return at(i(this,o),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return at(i(this,o),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,f(this,V,it).call(this),f(this,W,rt).call(this),i(this,o).removeObserver(this)}setOptions(t,e){const r=this.options,a=i(this,o);if(this.options=i(this,b).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");f(this,z,nt).call(this),i(this,o).setOptions(this.options),r._defaulted&&!Z(this.options,r)&&i(this,b).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,o),observer:this});const u=this.hasListeners();u&&gt(i(this,o),a,this.options,r)&&f(this,Q,L).call(this),this.updateResult(e),u&&(i(this,o)!==a||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&f(this,N,$).call(this);const c=f(this,H,tt).call(this);u&&(i(this,o)!==a||this.options.enabled!==r.enabled||c!==i(this,S))&&f(this,_,et).call(this,c)}getOptimisticResult(t){const e=i(this,b).getQueryCache().build(i(this,b),t),r=this.createResult(e,t);return Kt(this,r)&&(l(this,m,r),l(this,F,this.options),l(this,w,i(this,o).state)),r}getCurrentResult(){return i(this,m)}trackResult(t,e){const r={};return Object.keys(t).forEach(a=>{Object.defineProperty(r,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),e==null||e(a),t[a])})}),r}trackProp(t){i(this,B).add(t)}getCurrentQuery(){return i(this,o)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=i(this,b).defaultQueryOptions(t),r=i(this,b).getQueryCache().build(i(this,b),e);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,e))}fetch(t){return f(this,Q,L).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,m)))}createResult(t,e){var ft;const r=i(this,o),a=this.options,u=i(this,m),c=i(this,w),p=i(this,F),D=t!==r?t.state:i(this,M),{state:O}=t;let d={...O},ht=!1,x;if(e._optimisticResults){const v=this.hasListeners(),X=!v&&yt(t,e),St=v&&gt(t,r,e,a);(X||St)&&(d={...d,...Qt(O.data,t.options)}),e._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:ct,errorUpdatedAt:lt,status:E}=d;if(e.select&&d.data!==void 0)if(u&&d.data===(c==null?void 0:c.data)&&e.select===i(this,A))x=i(this,U);else try{l(this,A,e.select),x=e.select(d.data),x=bt(u==null?void 0:u.data,x,e),l(this,U,x),l(this,y,null)}catch(v){l(this,y,v)}else x=d.data;if(e.placeholderData!==void 0&&x===void 0&&E==="pending"){let v;if(u!=null&&u.isPlaceholderData&&e.placeholderData===(p==null?void 0:p.placeholderData))v=u.data;else if(v=typeof e.placeholderData=="function"?e.placeholderData((ft=i(this,P))==null?void 0:ft.state.data,i(this,P)):e.placeholderData,e.select&&v!==void 0)try{v=e.select(v),l(this,y,null)}catch(X){l(this,y,X)}v!==void 0&&(E="success",x=bt(u==null?void 0:u.data,v,e),ht=!0)}i(this,y)&&(ct=i(this,y),x=i(this,U),lt=Date.now(),E="error");const J=d.fetchStatus==="fetching",q=E==="pending",G=E==="error",ut=q&&J,dt=x!==void 0;return{status:E,fetchStatus:d.fetchStatus,isPending:q,isSuccess:E==="success",isError:G,isInitialLoading:ut,isLoading:ut,data:x,dataUpdatedAt:d.dataUpdatedAt,error:ct,errorUpdatedAt:lt,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>D.dataUpdateCount||d.errorUpdateCount>D.errorUpdateCount,isFetching:J,isRefetching:J&&!q,isLoadingError:G&&!dt,isPaused:d.fetchStatus==="paused",isPlaceholderData:ht,isRefetchError:G&&dt,isStale:ot(t,e),refetch:this.refetch}}updateResult(t){const e=i(this,m),r=this.createResult(i(this,o),this.options);if(l(this,w,i(this,o).state),l(this,F,this.options),i(this,w).data!==void 0&&l(this,P,i(this,o)),Z(r,e))return;l(this,m,r);const a={},u=()=>{if(!e)return!0;const{notifyOnChangeProps:c}=this.options,p=typeof c=="function"?c():c;if(p==="all"||!p&&!i(this,B).size)return!0;const g=new Set(p??i(this,B));return this.options.throwOnError&&g.add("error"),Object.keys(i(this,m)).some(D=>{const O=D;return i(this,m)[O]!==e[O]&&g.has(O)})};(t==null?void 0:t.listeners)!==!1&&u()&&(a.listeners=!0),f(this,K,Ct).call(this,{...a,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&f(this,k,st).call(this)}},b=new WeakMap,o=new WeakMap,M=new WeakMap,m=new WeakMap,w=new WeakMap,F=new WeakMap,y=new WeakMap,A=new WeakMap,U=new WeakMap,P=new WeakMap,T=new WeakMap,I=new WeakMap,S=new WeakMap,B=new WeakMap,Q=new WeakSet,L=function(t){f(this,z,nt).call(this);let e=i(this,o).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(wt)),e},N=new WeakSet,$=function(){if(f(this,V,it).call(this),pt||i(this,m).isStale||!mt(this.options.staleTime))return;const e=Tt(i(this,m).dataUpdatedAt,this.options.staleTime)+1;l(this,T,setTimeout(()=>{i(this,m).isStale||this.updateResult()},e))},H=new WeakSet,tt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,o)):this.options.refetchInterval)??!1},_=new WeakSet,et=function(t){f(this,W,rt).call(this),l(this,S,t),!(pt||this.options.enabled===!1||!mt(i(this,S))||i(this,S)===0)&&l(this,I,setInterval(()=>{(this.options.refetchIntervalInBackground||It.isFocused())&&f(this,Q,L).call(this)},i(this,S)))},k=new WeakSet,st=function(){f(this,N,$).call(this),f(this,_,et).call(this,f(this,H,tt).call(this))},V=new WeakSet,it=function(){i(this,T)&&(clearTimeout(i(this,T)),l(this,T,void 0))},W=new WeakSet,rt=function(){i(this,I)&&(clearInterval(i(this,I)),l(this,I,void 0))},z=new WeakSet,nt=function(){const t=i(this,b).getQueryCache().build(i(this,b),this.options);if(t===i(this,o))return;const e=i(this,o);l(this,o,t),l(this,M,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},K=new WeakSet,Ct=function(t){jt.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(i(this,m))}),i(this,b).getQueryCache().notify({query:i(this,o),type:"observerResultsUpdated"})})},Rt);function zt(s,t){return t.enabled!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function yt(s,t){return zt(s,t)||s.state.data!==void 0&&at(s,t,t.refetchOnMount)}function at(s,t,e){if(t.enabled!==!1){const r=typeof e=="function"?e(s):e;return r==="always"||r!==!1&&ot(s,t)}return!1}function gt(s,t,e,r){return(s!==t||r.enabled===!1)&&(!e.suspense||s.state.status!=="error")&&ot(s,e)}function ot(s,t){return t.enabled!==!1&&s.isStaleByTime(t.staleTime)}function Kt(s,t){return!Z(s.getCurrentResult(),t)}var Ot=C.createContext(!1),Jt=()=>C.useContext(Ot);Ot.Provider;function qt(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Gt=C.createContext(qt()),Xt=()=>C.useContext(Gt);function Yt(s,t){return typeof s=="function"?s(...t):!!s}var Zt=(s,t)=>{(s.suspense||s.throwOnError)&&(t.isReset()||(s.retryOnMount=!1))},$t=s=>{C.useEffect(()=>{s.clearReset()},[s])},te=({result:s,errorResetBoundary:t,throwOnError:e,query:r})=>s.isError&&!t.isReset()&&!s.isFetching&&r&&Yt(e,[s.error,r]),ee=s=>{s.suspense&&typeof s.staleTime!="number"&&(s.staleTime=1e3)},se=(s,t)=>(s==null?void 0:s.suspense)&&t.isPending,ie=(s,t,e)=>t.fetchOptimistic(s).catch(()=>{e.clearReset()});function re(s,t,e){const r=Dt(e),a=Jt(),u=Xt(),c=r.defaultQueryOptions(s);c._optimisticResults=a?"isRestoring":"optimistic",ee(c),Zt(c,u),$t(u);const[p]=C.useState(()=>new t(r,c)),g=p.getOptimisticResult(c);if(C.useSyncExternalStore(C.useCallback(D=>{const O=a?()=>{}:p.subscribe(jt.batchCalls(D));return p.updateResult(),O},[p,a]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),C.useEffect(()=>{p.setOptions(c,{listeners:!1})},[c,p]),se(c,g))throw ie(c,p,u);if(te({result:g,errorResetBoundary:u,throwOnError:c.throwOnError,query:r.getQueryCache().get(c.queryHash)}))throw g.error;return c.notifyOnChangeProps?g:p.trackResult(g)}function ne(s,t){return re(s,Wt,t)}const Ge=({auth:s})=>{const{data:t,status:e,refetch:r}=ne({queryKey:["data"],queryFn:async()=>(await Ft.get("/staffs/all")).data,refetchInterval:6e4,staleTime:1e4});return n.jsx(_t,{user:s.user,children:n.jsxs(Ut,{children:[n.jsx(Pt,{children:n.jsxs("div",{className:"flex justify-between items-center gap-5 flow-col flex-wrap",children:[n.jsx("div",{children:n.jsx(Bt,{children:"Our Officials"})}),n.jsx(kt,{refetch:r})]})}),n.jsx(Lt,{children:n.jsxs(Mt,{children:[n.jsxs(At,{children:["Total Staffs:"," ",e==="success"?t==null?void 0:t.length:"Loading..."]}),n.jsx(Nt,{children:n.jsxs(vt,{children:[n.jsx(R,{}),n.jsx(R,{children:"ID"}),n.jsx(R,{children:"Name"}),n.jsx(R,{children:"Phone"}),n.jsx(R,{children:"Joining Date"}),n.jsx(R,{children:"DOB"}),n.jsx(R,{children:"Position"}),n.jsx(R,{children:"Status"}),n.jsx(R,{})]})}),n.jsx(Ht,{children:t==null?void 0:t.map(a=>n.jsxs(vt,{children:[n.jsx(j,{children:n.jsx("div",{className:"relative h-14 w-14",children:n.jsx("img",{src:a.photo,className:"absolute inset-0 h-full w-full rounded-full border-2 border-primary object-cover",alt:"Official"})})}),n.jsx(j,{children:a.id}),n.jsx(j,{children:a.name}),n.jsx(j,{children:a.phone}),n.jsx(j,{children:a.joining_date}),n.jsx(j,{children:a.dob}),n.jsx(j,{children:a.position}),n.jsxs(j,{children:[" ",a.status=="active"?n.jsx(xt,{variant:"default",children:"Active"}):n.jsx(xt,{variant:"secondary",className:"text-muted-foreground",children:"Disabled"})]}),n.jsx(j,{children:n.jsx(Vt,{refetch:r,official:a})})]}))})]})})]})})};export{Ge as default};
