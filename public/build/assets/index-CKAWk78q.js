import{W as C,r as p,j as e}from"./app-HoDmrXNN.js";import{I as d}from"./InputError-TOSMNCfi.js";import{B as M}from"./button-BJi7Ukxl.js";import{L as h}from"./label-CL0pq-nz.js";import{T as g}from"./textarea-BcKiGzl-.js";import{A as N}from"./AuthenticatedLayout-BPmlR_FM.js";import y from"./FilterPopover-DBavHkH1.js";import"./index-CFlD9-z1.js";import"./index-Bb4qSo10.js";import"./utils-C-Zvzyq5.js";import"./index-CuHBRXKR.js";import"./GlobalLayout-irMQQyuT.js";import"./toaster-C-HwiJUl.js";import"./index-D_DgHOsp.js";import"./index-CZNwChqj.js";import"./x-hw2QYuFl.js";import"./createLucideIcon-B5c7f2k6.js";import"./use-toast-CIr2tFUS.js";import"./card-DJOBn3Fy.js";import"./sheet-DjBlWYzC.js";import"./index-Ddbn_Yk1.js";import"./index-DmpELkTC.js";import"./dropdown-menu-66TOR_NV.js";import"./index-DZm7ZyEy.js";import"./check-DBLKpwDX.js";import"./door-open-DpsNajMA.js";import"./input-CiGtSvJf.js";import"./popover-DQLTl1U4.js";import"./segmented-control-C1WlBLse.js";import"./select-CZrVjgA_.js";import"./filter-HXR_cegW.js";const re=({auth:u,sms_balance:a,packages:x,contacts:j})=>{const{data:s,setData:r,errors:i,post:f,processing:P}=C({contacts:j||[],message:""}),[m,n]=p.useState(1),[v,c]=p.useState(160),S=t=>{const o=t.length,l=Math.max(Math.ceil(o/160),1);n(l),c(l*160)},b=t=>{if(t.preventDefault(),!s.contacts.length||!s.message.trim()){console.error("Contacts and Message are required");return}f("/send-message",{onSuccess:()=>{r({contacts:[],message:""}),n(1),c(160)}})};return e.jsxs(N,{user:u.user,children:[e.jsxs("header",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Send Message"}),a<0?e.jsx("span",{className:"text-muted-foreground",children:"SMS service unavailable"}):e.jsxs("span",{className:"text-card-foreground",children:["Balance: Rs ",a]})]}),e.jsx("div",{className:"ms-auto",children:e.jsx(y,{packages:x})}),e.jsxs("form",{className:"space-y-3",onSubmit:b,children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"contacts",children:"Contacts"}),e.jsx(g,{id:"contacts",required:!0,value:s.contacts.length>0?s.contacts.join(", "):"",onChange:t=>r("contacts",t.target.value?t.target.value.split(",").map(o=>o.trim()):[]),placeholder:"Comma Separated contact numbers"}),e.jsx(d,{message:i.contacts})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"message",children:"Message"}),e.jsx(g,{id:"message",required:!0,value:s.message,onChange:t=>{r("message",t.target.value),S(t.target.value)},placeholder:"Enter message to the members"}),e.jsx(d,{message:i.message}),e.jsxs("div",{className:"text-muted-foreground mt-2 flex justify-between",children:[e.jsxs("span",{children:["Total Pages: ",m," - (Rs ",(m*s.contacts.length*1.4).toFixed(2),")"]}),e.jsxs("span",{children:[s.message.length," / ",v]})]})]}),e.jsx(M,{type:"submit",disabled:a<=0,children:"Send SMS Alert"})]})]})};export{re as default};
