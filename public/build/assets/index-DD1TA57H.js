import{r,R as N}from"./app-CeHawWK7.js";import{a as _,b as O,_ as C,c as M}from"./index-B_ku7PSA.js";function g(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function H(e,t=[]){let n=[];function s(c,d){const i=r.createContext(d),u=n.length;n=[...n,d];function b(a){const{scope:$,children:v,...h}=a,y=($==null?void 0:$[e][u])||i,E=r.useMemo(()=>h,Object.values(h));return r.createElement(y.Provider,{value:E},v)}function l(a,$){const v=($==null?void 0:$[e][u])||i,h=r.useContext(v);if(h)return h;if(d!==void 0)return d;throw new Error(`\`${a}\` must be used within \`${c}\``)}return b.displayName=c+"Provider",[b,l]}const o=()=>{const c=n.map(d=>r.createContext(d));return function(i){const u=(i==null?void 0:i[e])||c;return r.useMemo(()=>({[`__scope${e}`]:{...i,[e]:u}}),[i,u])}};return o.scopeName=e,[s,z(o,...t)]}function z(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(c){const d=s.reduce((i,{useScope:u,scopeName:b})=>{const a=u(c)[`__scope${b}`];return{...i,...a}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return n.scopeName=t.scopeName,n}const V=globalThis!=null&&globalThis.document?r.useLayoutEffect:()=>{};function p(e){const t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...n)=>{var s;return(s=t.current)===null||s===void 0?void 0:s.call(t,...n)},[])}function ee({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,o]=A({defaultProp:t,onChange:n}),c=e!==void 0,d=c?e:s,i=p(n),u=r.useCallback(b=>{if(c){const a=typeof b=="function"?b(e):b;a!==e&&i(a)}else o(b)},[c,e,o,i]);return[d,u]}function A({defaultProp:e,onChange:t}){const n=r.useState(e),[s]=n,o=r.useRef(s),c=p(t);return r.useEffect(()=>{o.current!==s&&(c(s),o.current=s)},[s,o,c]),n}function K(e,t=globalThis==null?void 0:globalThis.document){const n=p(e);r.useEffect(()=>{const s=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",s),()=>t.removeEventListener("keydown",s)},[n,t])}const x="dismissableLayer.update",j="dismissableLayer.pointerDownOutside",X="dismissableLayer.focusOutside";let R;const F=r.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),q=r.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:i,onDismiss:u,...b}=e,l=r.useContext(F),[a,$]=r.useState(null),v=(n=a==null?void 0:a.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,h]=r.useState({}),y=_(t,f=>$(f)),E=Array.from(l.layers),[B]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),I=E.indexOf(B),D=a?E.indexOf(a):-1,W=l.layersWithOutsidePointerEventsDisabled.size>0,T=D>=I,U=J(f=>{const P=f.target,L=[...l.branches].some(m=>m.contains(P));!T||L||(c==null||c(f),i==null||i(f),f.defaultPrevented||u==null||u())},v),w=Q(f=>{const P=f.target;[...l.branches].some(m=>m.contains(P))||(d==null||d(f),i==null||i(f),f.defaultPrevented||u==null||u())},v);return K(f=>{D===l.layers.size-1&&(o==null||o(f),!f.defaultPrevented&&u&&(f.preventDefault(),u()))},v),r.useEffect(()=>{if(a)return s&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(R=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(a)),l.layers.add(a),S(),()=>{s&&l.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=R)}},[a,v,s,l]),r.useEffect(()=>()=>{a&&(l.layers.delete(a),l.layersWithOutsidePointerEventsDisabled.delete(a),S())},[a,l]),r.useEffect(()=>{const f=()=>h({});return document.addEventListener(x,f),()=>document.removeEventListener(x,f)},[]),r.createElement(O.div,C({},b,{ref:y,style:{pointerEvents:W?T?"auto":"none":void 0,...e.style},onFocusCapture:g(e.onFocusCapture,w.onFocusCapture),onBlurCapture:g(e.onBlurCapture,w.onBlurCapture),onPointerDownCapture:g(e.onPointerDownCapture,U.onPointerDownCapture)}))}),G=r.forwardRef((e,t)=>{const n=r.useContext(F),s=r.useRef(null),o=_(t,s);return r.useEffect(()=>{const c=s.current;if(c)return n.branches.add(c),()=>{n.branches.delete(c)}},[n.branches]),r.createElement(O.div,C({},e,{ref:o}))});function J(e,t=globalThis==null?void 0:globalThis.document){const n=p(e),s=r.useRef(!1),o=r.useRef(()=>{});return r.useEffect(()=>{const c=i=>{if(i.target&&!s.current){let b=function(){k(j,n,u,{discrete:!0})};const u={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=b,t.addEventListener("click",o.current,{once:!0})):b()}else t.removeEventListener("click",o.current);s.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",c),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function Q(e,t=globalThis==null?void 0:globalThis.document){const n=p(e),s=r.useRef(!1);return r.useEffect(()=>{const o=c=>{c.target&&!s.current&&k(X,n,{originalEvent:c},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function S(){const e=new CustomEvent(x);document.dispatchEvent(e)}function k(e,t,n,{discrete:s}){const o=n.originalEvent.target,c=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),s?M(o,c):o.dispatchEvent(c)}const te=q,ne=G,oe=r.forwardRef((e,t)=>{var n;const{container:s=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...o}=e;return s?N.createPortal(r.createElement(O.div,C({},o,{ref:t})),s):null});export{H as $,ee as a,g as b,V as c,oe as d,q as e,p as f,ne as g,te as h};
