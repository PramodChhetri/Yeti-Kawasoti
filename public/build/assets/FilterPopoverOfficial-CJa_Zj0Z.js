import{q as y,r as f,j as e,y as _}from"./app-CeHawWK7.js";import{I as S}from"./input-iG9gLFRb.js";import{B as j}from"./button-CBFDvSSe.js";import{P as O,a as A,b as L}from"./popover-BfFK9Qtk.js";import{L as p}from"./label-DZHSVrJR.js";import{S as b}from"./segmented-control-BJ3PsD5-.js";import{S as W,a as G,b as U,c as B,d as o}from"./select-CrO88sMk.js";import{F as E}from"./filter-DSXKKHjN.js";import"./utils-CRrpu23W.js";import"./index-Clynsdhc.js";import"./index-Bb4qSo10.js";import"./index-BBHitacn.js";import"./index-B_ku7PSA.js";import"./index-DD1TA57H.js";import"./index-C9wzw3Ty.js";import"./index-JWIwkwlr.js";import"./createLucideIcon-T09ZsU69.js";import"./check-U2lRsC70.js";function K(d){const m=new URLSearchParams(d.split("?")[1]),r={},a=(i,u,l)=>{u.reduce((c,n,h)=>(h===u.length-1?c[n]=l:c[n]=c[n]||{},c[n]),i)};for(const[i,u]of m.entries())if(i.startsWith("filter[")){const l=i.match(/filter\[(.+?)\]/);if(l&&l[1]){const n=l[1].split(/\[|\]/).filter(Boolean);a(r,n,u)}}return r}function ie({recipientType:d="officials"}){var v,R;const m=y().url,r=K(m),[a,i]=f.useState({position:r.position||"all",gender:r.gender||"all",status:r.status||"all",joiningDateRange:{start:((v=r.joiningDateRange)==null?void 0:v.start)||"",end:((R=r.joiningDateRange)==null?void 0:R.end)||""}}),[u,l]=f.useState(a.gender),[c,n]=f.useState(a.status),[h,x]=f.useState(a.position),D=f.useRef(null);f.useEffect(()=>{l(a.gender),n(a.status)},[a.gender,a.status]);const F=()=>{const t=new URLSearchParams;if(d&&t.append("recipient_type",d),t.append("auto_load","false"),a.position!=="all"&&t.append("filter[position]",a.position),a.gender!=="all"&&t.append("filter[gender]",a.gender),a.status!=="all"&&t.append("filter[status]",a.status),a.joiningDateRange.start&&t.append("filter[joining_date][start]",a.joiningDateRange.start),a.joiningDateRange.end&&t.append("filter[joining_date][end]",a.joiningDateRange.end),d==="both"){const C=new URLSearchParams(window.location.search);for(const[g,N]of C.entries())g.startsWith("filter[")&&!g.startsWith("filter[gender]")&&!g.startsWith("filter[status]")&&!g.startsWith("filter[position]")&&!g.startsWith("filter[joining_date]")&&t.append(g,N)}console.log("Applying official filters with params:",Object.fromEntries(t.entries()));const s=`/messenging?${t.toString()}`;_.visit(s)},P=()=>{i({position:"all",gender:"all",status:"all",joiningDateRange:{start:"",end:""}}),l("all"),n("all"),x("all")},w=()=>d==="both"?"Filter Officials":"Filter";return e.jsxs(O,{children:[e.jsx(A,{asChild:!0,children:e.jsxs(j,{variant:"secondary",className:"border ml-2",children:[e.jsx(E,{size:14})," Â  ",w()]})}),e.jsxs(L,{className:"p-4 space-y-4 w-fit max-w-full overflow-auto",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Filter Officials"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{children:"Gender"}),e.jsx(b,{items:[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"All",value:"all"}],value:u,onChange:t=>{l(t),i(s=>({...s,gender:t}))}})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"position",children:"Position"}),e.jsxs(W,{value:a.position,onValueChange:t=>{x(t),i(s=>({...s,position:t}))},children:[e.jsx(G,{children:e.jsx(U,{placeholder:"Select position"})}),e.jsxs(B,{children:[e.jsx(o,{value:"all",children:"All"}),e.jsx(o,{value:"Owner",children:"Owner"}),e.jsx(o,{value:"Manager",children:"Manager"}),e.jsx(o,{value:"Trainer",children:"Trainer"}),e.jsx(o,{value:"Reception",children:"Reception"}),e.jsx(o,{value:"Guard",children:"Guard"}),e.jsx(o,{value:"House-Keeping",children:"House Keeping"}),e.jsx(o,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"col-span-full",children:[e.jsx(p,{children:"Joining Date Range"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(S,{type:"date",name:"joining_start_date",value:a.joiningDateRange.start,onChange:t=>{i(s=>({...s,joiningDateRange:{...s.joiningDateRange,start:t.target.value}}))},className:"w-full"}),e.jsx("span",{children:"-"}),e.jsx(S,{type:"date",name:"joining_end_date",value:a.joiningDateRange.end,onChange:t=>i(s=>({...s,joiningDateRange:{...s.joiningDateRange,end:t.target.value}})),className:"w-full"})]})]}),e.jsxs("div",{className:"col-span-full",children:[e.jsx(p,{children:"Status"}),e.jsx(b,{items:[{label:"Active",value:"active"},{label:"Disabled",value:"disabled"},{label:"All",value:"all"}],value:c,onChange:t=>{n(t),i(s=>({...s,status:t}))}})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx(j,{variant:"outline",onClick:P,children:"Clear"}),e.jsx(j,{onClick:F,ref:D,children:"Apply"})]})]})]})}export{ie as default};
