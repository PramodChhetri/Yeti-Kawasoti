import{W as C,r as p,j as e}from"./app-C-2dbyny.js";import{I as d}from"./InputError-B94S4z22.js";import{B as M}from"./button-D5ZFNQqX.js";import{L as h}from"./label-OnmEhoPq.js";import{T as g}from"./textarea-DkbFnZck.js";import{A as N}from"./AuthenticatedLayout-DoXwDPNH.js";import y from"./FilterPopover-BZMXoIS8.js";import"./index-B6HZh0D4.js";import"./index-Bb4qSo10.js";import"./utils-C-Zvzyq5.js";import"./index-CgG8GO0l.js";import"./GlobalLayout-B8qZxMFY.js";import"./toaster-SfUgPeMN.js";import"./index-CeWLXtCu.js";import"./index-DaHLLiAz.js";import"./x-4GEGzZzY.js";import"./createLucideIcon-CtL4XtbQ.js";import"./use-toast-EJ_STsKn.js";import"./card-D7iUihQv.js";import"./sheet-CnxVgnaA.js";import"./index-9mQ8HMVg.js";import"./index-BUhMdZJS.js";import"./dropdown-menu-wrjWS5Yy.js";import"./index-B18lGLZU.js";import"./check-DZ77NiUC.js";import"./door-open-D854-TvN.js";import"./input-D25ft-ha.js";import"./popover-DnfuLhhv.js";import"./segmented-control-nPMpX8Yr.js";import"./select-x7AGca_y.js";import"./filter-BtsXKdNe.js";const re=({auth:u,sms_balance:a,packages:x,contacts:j})=>{const{data:s,setData:r,errors:i,post:f,processing:P}=C({contacts:j||[],message:""}),[m,n]=p.useState(1),[v,c]=p.useState(160),S=t=>{const o=t.length,l=Math.max(Math.ceil(o/160),1);n(l),c(l*160)},b=t=>{if(t.preventDefault(),!s.contacts.length||!s.message.trim()){console.error("Contacts and Message are required");return}f("/send-message",{onSuccess:()=>{r({contacts:[],message:""}),n(1),c(160)}})};return e.jsxs(N,{user:u.user,children:[e.jsxs("header",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Send Message"}),a<0?e.jsx("span",{className:"text-muted-foreground",children:"SMS service unavailable"}):e.jsxs("span",{className:"text-card-foreground",children:["Balance: Rs ",a]})]}),e.jsx("div",{className:"ms-auto",children:e.jsx(y,{packages:x})}),e.jsxs("form",{className:"space-y-3",onSubmit:b,children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"contacts",children:"Contacts"}),e.jsx(g,{id:"contacts",required:!0,value:s.contacts.length>0?s.contacts.join(", "):"",onChange:t=>r("contacts",t.target.value?t.target.value.split(",").map(o=>o.trim()):[]),placeholder:"Comma Separated contact numbers"}),e.jsx(d,{message:i.contacts})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"message",children:"Message"}),e.jsx(g,{id:"message",required:!0,value:s.message,onChange:t=>{r("message",t.target.value),S(t.target.value)},placeholder:"Enter message to the members"}),e.jsx(d,{message:i.message}),e.jsxs("div",{className:"text-muted-foreground mt-2 flex justify-between",children:[e.jsxs("span",{children:["Total Pages: ",m," - (Rs ",(m*s.contacts.length*1.4).toFixed(2),")"]}),e.jsxs("span",{children:[s.message.length," / ",v]})]})]}),e.jsx(M,{type:"submit",disabled:a<=0,children:"Send SMS Alert"})]})]})};export{re as default};
