import{W as C,r as p,j as e}from"./app-DxhgH9la.js";import{I as d}from"./InputError-B6HEij25.js";import{B as M}from"./button-CQRnvolg.js";import{L as h}from"./label-BCYFEXFM.js";import{T as g}from"./textarea-DQcQfo8L.js";import{A as N}from"./AuthenticatedLayout-Daqh-ZAm.js";import y from"./FilterPopover-Ce0X4Npv.js";import"./index-CDna1s6C.js";import"./index-Bb4qSo10.js";import"./utils-C-Zvzyq5.js";import"./index-mZgcqd2l.js";import"./GlobalLayout-Bq7hwQH4.js";import"./toaster-bZriELgZ.js";import"./index-CzHYO1du.js";import"./index-CF3a9R0E.js";import"./x-D4R6_HQS.js";import"./createLucideIcon-BCR1lBT3.js";import"./use-toast-Tc-_Q_S1.js";import"./card-JPYiSOfV.js";import"./sheet-Cf9Z4Dtw.js";import"./index-4JGS_wby.js";import"./index-CirN_iVP.js";import"./dropdown-menu-Dg02MNjQ.js";import"./index-CXOfu3wE.js";import"./check-eedJZ6Dw.js";import"./input-DTs6kzBN.js";import"./popover-CB_DOt37.js";import"./segmented-control-Ct6tqUsc.js";import"./select-Kd40EoFx.js";import"./filter-C9xw_lrm.js";const ae=({auth:u,sms_balance:a,packages:x,contacts:j})=>{const{data:s,setData:r,errors:i,post:f,processing:P}=C({contacts:j||[],message:""}),[n,m]=p.useState(1),[v,c]=p.useState(160),S=t=>{const o=t.length,l=Math.max(Math.ceil(o/160),1);m(l),c(l*160)},b=t=>{if(t.preventDefault(),!s.contacts.length||!s.message.trim()){console.error("Contacts and Message are required");return}f("/send-message",{onSuccess:()=>{r({contacts:[],message:""}),m(1),c(160)}})};return e.jsxs(N,{user:u.user,children:[e.jsxs("header",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Send Message"}),a<0?e.jsx("span",{className:"text-muted-foreground",children:"SMS service unavailable"}):e.jsxs("span",{className:"text-card-foreground",children:["Balance: Rs ",a]})]}),e.jsx("div",{className:"ms-auto",children:e.jsx(y,{packages:x})}),e.jsxs("form",{className:"space-y-3",onSubmit:b,children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"contacts",children:"Contacts"}),e.jsx(g,{id:"contacts",required:!0,value:s.contacts.length>0?s.contacts.join(", "):"",onChange:t=>r("contacts",t.target.value?t.target.value.split(",").map(o=>o.trim()):[]),placeholder:"Comma Separated contact numbers"}),e.jsx(d,{message:i.contacts})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"message",children:"Message"}),e.jsx(g,{id:"message",required:!0,value:s.message,onChange:t=>{r("message",t.target.value),S(t.target.value)},placeholder:"Enter message to the members"}),e.jsx(d,{message:i.message}),e.jsxs("div",{className:"text-muted-foreground mt-2 flex justify-between",children:[e.jsxs("span",{children:["Total Pages: ",n," - (Rs ",(n*s.contacts.length*1.4).toFixed(2),")"]}),e.jsxs("span",{children:[s.message.length," / ",v]})]})]}),e.jsx(M,{type:"submit",disabled:a<=0,children:"Send SMS Alert"})]})]})};export{ae as default};
