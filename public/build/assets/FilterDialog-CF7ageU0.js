import{r as n,q as z,j as e,y as J}from"./app-CeHawWK7.js";import{B as N}from"./button-CBFDvSSe.js";import{D as Q,a as W,b as X,c as Y,d as Z,f as $}from"./dialog-vdBOxT0G.js";import{L as t}from"./label-DZHSVrJR.js";import{C as M}from"./checkbox-CkOFPeYk.js";import{I as x}from"./input-iG9gLFRb.js";import{S as g}from"./segmented-control-BJ3PsD5-.js";import{S as A,a as E,b as G,c as P,d}from"./select-CrO88sMk.js";import{C as y,a as D,b as C,d as S}from"./card-m7sUhe83.js";import{S as ee}from"./scroll-area-CGdfJqqN.js";import{F as ae}from"./filter-DSXKKHjN.js";import"./index-Clynsdhc.js";import"./index-Bb4qSo10.js";import"./utils-CRrpu23W.js";import"./index-DmAnl5gc.js";import"./index-B_ku7PSA.js";import"./index-DD1TA57H.js";import"./index-C9wzw3Ty.js";import"./x-CcTwlrmH.js";import"./createLucideIcon-T09ZsU69.js";import"./check-U2lRsC70.js";import"./index-JWIwkwlr.js";import"./index-BBHitacn.js";function Ce({packages:T,initialRecipientType:p="both",initialFilters:r={}}){const[L,R]=n.useState(!1);z().url;const i=new URLSearchParams(window.location.search),[c,F]=n.useState(p==="members"||p==="both"),[m,k]=n.useState(p==="officials"||p==="both"),[s,O]=n.useState({membership_package_id:r.membership_package_id||i.get("membership_package_id")||"all",gender:r.member_gender||i.get("member_gender")||"all",status:r.member_status||i.get("member_status")||"all",joiningDateRange:{start:r.member_joining_date_start||i.get("member_joining_date_start")||"",end:r.member_joining_date_end||i.get("member_joining_date_end")||""},expiryDateRange:{start:r.member_expiry_date_start||i.get("member_expiry_date_start")||"",end:r.member_expiry_date_end||i.get("member_expiry_date_end")||""}}),[l,w]=n.useState({position:r.position||i.get("position")||"all",gender:r.official_gender||i.get("official_gender")||"all",status:r.official_status||i.get("official_status")||"all"}),[H,h]=n.useState(s.gender),[I,f]=n.useState(s.status),[B,u]=n.useState(l.gender),[U,j]=n.useState(l.status);n.useEffect(()=>{h(s.gender),f(s.status),u(l.gender),j(l.status)},[s,l]);const o=(a,_)=>{O(v=>({...v,[a]:_}))},b=(a,_)=>{w(v=>({...v,[a]:_}))},V=()=>c&&m?"Filter Members & Officials":c?"Filter Members":m?"Filter Officials":"Filter Recipients",K=()=>{const a=new URLSearchParams;c&&(s.membership_package_id!=="all"&&a.append("membership_package_id",s.membership_package_id),s.gender!=="all"&&a.append("member_gender",s.gender),s.status!=="all"&&a.append("member_status",s.status),s.joiningDateRange.start&&a.append("member_joining_date_start",s.joiningDateRange.start),s.joiningDateRange.end&&a.append("member_joining_date_end",s.joiningDateRange.end),s.expiryDateRange.start&&a.append("member_expiry_date_start",s.expiryDateRange.start),s.expiryDateRange.end&&a.append("member_expiry_date_end",s.expiryDateRange.end)),m&&(l.position!=="all"&&a.append("position",l.position),l.gender!=="all"&&a.append("official_gender",l.gender),l.status!=="all"&&a.append("official_status",l.status)),c&&m?a.append("recipient_type","both"):c?a.append("recipient_type","members"):m?a.append("recipient_type","officials"):a.append("recipient_type","none"),a.append("cache_buster",Date.now().toString()),console.log("Applying filters with params:",Object.fromEntries(a.entries())),J.get("/messenging",Object.fromEntries(a)),R(!1)},q=()=>{O({membership_package_id:"all",gender:"all",status:"all",joiningDateRange:{start:"",end:""},expiryDateRange:{start:"",end:""}}),w({position:"all",gender:"all",status:"all"}),h("all"),f("all"),u("all"),j("all"),F(!0),k(!0)};return e.jsxs(Q,{open:L,onOpenChange:R,children:[e.jsx(W,{asChild:!0,children:e.jsxs(N,{variant:"secondary",className:"border",children:[e.jsx(ae,{size:14,className:"mr-2"})," ",V()]})}),e.jsxs(X,{className:"w-full max-w-2xl overflow-hidden p-0",children:[e.jsx(Y,{className:"px-6 pt-6 pb-2",children:e.jsx(Z,{className:"text-lg font-bold",children:"Filter Recipients"})}),e.jsx(ee,{className:"max-h-[75vh] px-6 pb-2",children:e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs(y,{children:[e.jsx(D,{className:"py-3",children:e.jsx(C,{className:"text-base",children:"Select Recipient Types"})}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"memberFilter",checked:c,onCheckedChange:a=>F(a)}),e.jsx(t,{htmlFor:"memberFilter",className:"text-base font-semibold cursor-pointer",children:"Members"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"officialFilter",checked:m,onCheckedChange:a=>k(a)}),e.jsx(t,{htmlFor:"officialFilter",className:"text-base font-semibold cursor-pointer",children:"Officials"})]})]})})]}),c&&e.jsxs(y,{children:[e.jsx(D,{className:"py-3",children:e.jsx(C,{className:"text-base",children:"Member Filters"})}),e.jsx(S,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{className:"font-medium",children:"Package"}),e.jsxs(A,{value:s.membership_package_id,onValueChange:a=>o("membership_package_id",a),children:[e.jsx(E,{className:"mt-1.5",children:e.jsx(G,{placeholder:"Select package"})}),e.jsxs(P,{children:[e.jsx(d,{value:"all",children:"All Packages"}),T.map(a=>e.jsx(d,{value:a.id.toString(),children:a.package_name},a.id))]})]})]}),e.jsxs("div",{children:[e.jsx(t,{className:"font-medium",children:"Gender"}),e.jsx(g,{items:[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"All",value:"all"}],value:H,onChange:a=>{h(a),o("gender",a)},className:"mt-1.5"})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(t,{className:"font-medium",children:"Status"}),e.jsx(g,{items:[{label:"Active",value:"active"},{label:"Expired",value:"expired"},{label:"Unapproved",value:"unapproved"},{label:"All",value:"all"}],value:I,onChange:a=>{f(a),o("status",a)},className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(t,{className:"font-medium",children:"Joining Date Range"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-1.5",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"From"}),e.jsx(x,{type:"date",value:s.joiningDateRange.start,onChange:a=>o("joiningDateRange",{...s.joiningDateRange,start:a.target.value}),className:"mt-0.5"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"To"}),e.jsx(x,{type:"date",value:s.joiningDateRange.end,onChange:a=>o("joiningDateRange",{...s.joiningDateRange,end:a.target.value}),className:"mt-0.5"})]})]})]}),e.jsxs("div",{children:[e.jsx(t,{className:"font-medium",children:"Expiry Date Range"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-1.5",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"From"}),e.jsx(x,{type:"date",value:s.expiryDateRange.start,onChange:a=>o("expiryDateRange",{...s.expiryDateRange,start:a.target.value}),className:"mt-0.5"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(t,{className:"text-xs text-muted-foreground",children:"To"}),e.jsx(x,{type:"date",value:s.expiryDateRange.end,onChange:a=>o("expiryDateRange",{...s.expiryDateRange,end:a.target.value}),className:"mt-0.5"})]})]})]})]})})]}),m&&e.jsxs(y,{children:[e.jsx(D,{className:"py-3",children:e.jsx(C,{className:"text-base",children:"Official Filters"})}),e.jsx(S,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{className:"font-medium",children:"Position"}),e.jsxs(A,{value:l.position,onValueChange:a=>b("position",a),children:[e.jsx(E,{className:"mt-1.5",children:e.jsx(G,{placeholder:"Select position"})}),e.jsxs(P,{children:[e.jsx(d,{value:"all",children:"All Positions"}),e.jsx(d,{value:"Owner",children:"Owner"}),e.jsx(d,{value:"Manager",children:"Manager"}),e.jsx(d,{value:"Trainer",children:"Trainer"}),e.jsx(d,{value:"Reception",children:"Reception"}),e.jsx(d,{value:"Guard",children:"Guard"}),e.jsx(d,{value:"House-Keeping",children:"House Keeping"}),e.jsx(d,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(t,{className:"font-medium",children:"Gender"}),e.jsx(g,{items:[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"All",value:"all"}],value:B,onChange:a=>{u(a),b("gender",a)},className:"mt-1.5"})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(t,{className:"font-medium",children:"Status"}),e.jsx(g,{items:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"All",value:"all"}],value:U,onChange:a=>{j(a),b("status",a)},className:"mt-1.5"})]})]})})]})]})}),e.jsxs($,{className:"p-6 pt-2 border-t",children:[e.jsx(N,{variant:"outline",onClick:q,children:"Clear All"}),e.jsx(N,{onClick:K,children:"Apply Filters"})]})]})]})}export{Ce as default};
