import{W as C,r as p,j as e}from"./app-GgFLoYAH.js";import{I as d}from"./InputError-97B_a4lm.js";import{B as M}from"./button-BiqH3d5r.js";import{L as h}from"./label-Mhc0LPc0.js";import{T as g}from"./textarea-DNzBGZs-.js";import{A as N}from"./AuthenticatedLayout-B-P8LveF.js";import y from"./FilterPopover-C4l80m-U.js";import"./index-ClrB7sDw.js";import"./index-Bb4qSo10.js";import"./utils-C-Zvzyq5.js";import"./index-JWUtb-qc.js";import"./GlobalLayout-C74LpAnn.js";import"./toaster-BgWGUQxI.js";import"./index-GknmoB8o.js";import"./index-DzSTJSMh.js";import"./x-DrxCXUfX.js";import"./createLucideIcon-CxmtV3NG.js";import"./use-toast-CRgGk0dw.js";import"./card-Cdkcj2Gi.js";import"./sheet-C7_d0LiD.js";import"./index-CV7mMyMG.js";import"./index-Dr4bQ6Np.js";import"./dropdown-menu-Cd2XWepH.js";import"./index-vaZD_7eF.js";import"./check-Ds00oqYy.js";import"./door-open-aLZ9la1B.js";import"./input-DS0YK0g0.js";import"./popover-B3S49Fme.js";import"./segmented-control-DcQRe-dH.js";import"./select-DgvjX51k.js";import"./filter-C0s-A5ij.js";const re=({auth:u,sms_balance:a,packages:x,contacts:j})=>{const{data:s,setData:r,errors:i,post:f,processing:P}=C({contacts:j||[],message:""}),[m,n]=p.useState(1),[v,c]=p.useState(160),S=t=>{const o=t.length,l=Math.max(Math.ceil(o/160),1);n(l),c(l*160)},b=t=>{if(t.preventDefault(),!s.contacts.length||!s.message.trim()){console.error("Contacts and Message are required");return}f("/send-message",{onSuccess:()=>{r({contacts:[],message:""}),n(1),c(160)}})};return e.jsxs(N,{user:u.user,children:[e.jsxs("header",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Send Message"}),a<0?e.jsx("span",{className:"text-muted-foreground",children:"SMS service unavailable"}):e.jsxs("span",{className:"text-card-foreground",children:["Balance: Rs ",a]})]}),e.jsx("div",{className:"ms-auto",children:e.jsx(y,{packages:x})}),e.jsxs("form",{className:"space-y-3",onSubmit:b,children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"contacts",children:"Contacts"}),e.jsx(g,{id:"contacts",required:!0,value:s.contacts.length>0?s.contacts.join(", "):"",onChange:t=>r("contacts",t.target.value?t.target.value.split(",").map(o=>o.trim()):[]),placeholder:"Comma Separated contact numbers"}),e.jsx(d,{message:i.contacts})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"message",children:"Message"}),e.jsx(g,{id:"message",required:!0,value:s.message,onChange:t=>{r("message",t.target.value),S(t.target.value)},placeholder:"Enter message to the members"}),e.jsx(d,{message:i.message}),e.jsxs("div",{className:"text-muted-foreground mt-2 flex justify-between",children:[e.jsxs("span",{children:["Total Pages: ",m," - (Rs ",(m*s.contacts.length*1.4).toFixed(2),")"]}),e.jsxs("span",{children:[s.message.length," / ",v]})]})]}),e.jsx(M,{type:"submit",disabled:a<=0,children:"Send SMS Alert"})]})]})};export{re as default};
