var Y=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var i=(s,t,e)=>(Y(s,t,"read from private field"),e?e.call(s):t.get(s)),h=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},l=(s,t,e,r)=>(Y(s,t,"write to private field"),r?r.call(s,e):t.set(s,e),e);var f=(s,t,e)=>(Y(s,t,"access private method"),e);import{S as Et,s as Z,n as Tt,i as pt,f as mt,t as wt,h as It,k as Qt,l as bt,o as Ct,r as R,u as Dt,j as n,d as Ft}from"./app-HoDmrXNN.js";import{C as Ut,a as Pt,b as Lt,d as Mt}from"./card-DJOBn3Fy.js";import{T as At,f as Bt,a as Nt,b as vt,c as j,d as Ht,e as O}from"./table-BBGnmZM7.js";import{A as _t}from"./AuthenticatedLayout-BPmlR_FM.js";import kt from"./CreateDialog-tQJQLILu.js";import{B as yt}from"./badge-BsozPfPs.js";import Vt from"./index-jNdczBjK.js";import"./utils-C-Zvzyq5.js";import"./GlobalLayout-irMQQyuT.js";import"./toaster-C-HwiJUl.js";import"./index-CuHBRXKR.js";import"./index-D_DgHOsp.js";import"./index-CZNwChqj.js";import"./x-hw2QYuFl.js";import"./createLucideIcon-B5c7f2k6.js";import"./index-Bb4qSo10.js";import"./use-toast-CIr2tFUS.js";import"./sheet-DjBlWYzC.js";import"./index-Ddbn_Yk1.js";import"./index-DmpELkTC.js";import"./button-BJi7Ukxl.js";import"./index-CFlD9-z1.js";import"./dropdown-menu-66TOR_NV.js";import"./index-DZm7ZyEy.js";import"./check-DBLKpwDX.js";import"./door-open-DpsNajMA.js";import"./dialog-CErlIxQH.js";import"./input-CiGtSvJf.js";import"./label-CL0pq-nz.js";import"./select-CZrVjgA_.js";import"./SingleImageUploader-djD4YNpL.js";import"./InputError-TOSMNCfi.js";import"./moment-Cl4UOzQZ.js";import"./EditStaffDialog-DYkC6dPr.js";import"./DisableStaffDialog-DE8pr6fh.js";import"./ViewStaffDialog-08AOIwV6.js";import"./StaffAccountsDialog-BK7Askps.js";import"./textarea-BcKiGzl-.js";import"./format-CE4V3joc.js";import"./ellipsis-CmLErP-G.js";var b,o,A,m,T,F,g,B,U,P,w,I,S,L,Q,M,N,$,H,tt,_,et,k,st,V,it,W,rt,z,nt,K,jt,Rt,Wt=(Rt=class extends Et{constructor(t,e){super();h(this,Q);h(this,N);h(this,H);h(this,_);h(this,k);h(this,V);h(this,W);h(this,z);h(this,K);h(this,b,void 0);h(this,o,void 0);h(this,A,void 0);h(this,m,void 0);h(this,T,void 0);h(this,F,void 0);h(this,g,void 0);h(this,B,void 0);h(this,U,void 0);h(this,P,void 0);h(this,w,void 0);h(this,I,void 0);h(this,S,void 0);h(this,L,new Set);this.options=e,l(this,b,t),l(this,g,null),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,o).addObserver(this),gt(i(this,o),this.options)?f(this,Q,M).call(this):this.updateResult(),f(this,k,st).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return at(i(this,o),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return at(i(this,o),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,f(this,V,it).call(this),f(this,W,rt).call(this),i(this,o).removeObserver(this)}setOptions(t,e){const r=this.options,a=i(this,o);if(this.options=i(this,b).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");f(this,z,nt).call(this),i(this,o).setOptions(this.options),r._defaulted&&!Z(this.options,r)&&i(this,b).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,o),observer:this});const u=this.hasListeners();u&&xt(i(this,o),a,this.options,r)&&f(this,Q,M).call(this),this.updateResult(e),u&&(i(this,o)!==a||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&f(this,N,$).call(this);const c=f(this,H,tt).call(this);u&&(i(this,o)!==a||this.options.enabled!==r.enabled||c!==i(this,S))&&f(this,_,et).call(this,c)}getOptimisticResult(t){const e=i(this,b).getQueryCache().build(i(this,b),t),r=this.createResult(e,t);return Kt(this,r)&&(l(this,m,r),l(this,F,this.options),l(this,T,i(this,o).state)),r}getCurrentResult(){return i(this,m)}trackResult(t,e){const r={};return Object.keys(t).forEach(a=>{Object.defineProperty(r,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),e==null||e(a),t[a])})}),r}trackProp(t){i(this,L).add(t)}getCurrentQuery(){return i(this,o)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=i(this,b).defaultQueryOptions(t),r=i(this,b).getQueryCache().build(i(this,b),e);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,e))}fetch(t){return f(this,Q,M).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,m)))}createResult(t,e){var ft;const r=i(this,o),a=this.options,u=i(this,m),c=i(this,T),p=i(this,F),D=t!==r?t.state:i(this,A),{state:C}=t;let d={...C},ht=!1,y;if(e._optimisticResults){const v=this.hasListeners(),X=!v&&gt(t,e),St=v&&xt(t,r,e,a);(X||St)&&(d={...d,...Qt(C.data,t.options)}),e._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:ct,errorUpdatedAt:lt,status:E}=d;if(e.select&&d.data!==void 0)if(u&&d.data===(c==null?void 0:c.data)&&e.select===i(this,B))y=i(this,U);else try{l(this,B,e.select),y=e.select(d.data),y=bt(u==null?void 0:u.data,y,e),l(this,U,y),l(this,g,null)}catch(v){l(this,g,v)}else y=d.data;if(e.placeholderData!==void 0&&y===void 0&&E==="pending"){let v;if(u!=null&&u.isPlaceholderData&&e.placeholderData===(p==null?void 0:p.placeholderData))v=u.data;else if(v=typeof e.placeholderData=="function"?e.placeholderData((ft=i(this,P))==null?void 0:ft.state.data,i(this,P)):e.placeholderData,e.select&&v!==void 0)try{v=e.select(v),l(this,g,null)}catch(X){l(this,g,X)}v!==void 0&&(E="success",y=bt(u==null?void 0:u.data,v,e),ht=!0)}i(this,g)&&(ct=i(this,g),y=i(this,U),lt=Date.now(),E="error");const J=d.fetchStatus==="fetching",q=E==="pending",G=E==="error",ut=q&&J,dt=y!==void 0;return{status:E,fetchStatus:d.fetchStatus,isPending:q,isSuccess:E==="success",isError:G,isInitialLoading:ut,isLoading:ut,data:y,dataUpdatedAt:d.dataUpdatedAt,error:ct,errorUpdatedAt:lt,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>D.dataUpdateCount||d.errorUpdateCount>D.errorUpdateCount,isFetching:J,isRefetching:J&&!q,isLoadingError:G&&!dt,isPaused:d.fetchStatus==="paused",isPlaceholderData:ht,isRefetchError:G&&dt,isStale:ot(t,e),refetch:this.refetch}}updateResult(t){const e=i(this,m),r=this.createResult(i(this,o),this.options);if(l(this,T,i(this,o).state),l(this,F,this.options),i(this,T).data!==void 0&&l(this,P,i(this,o)),Z(r,e))return;l(this,m,r);const a={},u=()=>{if(!e)return!0;const{notifyOnChangeProps:c}=this.options,p=typeof c=="function"?c():c;if(p==="all"||!p&&!i(this,L).size)return!0;const x=new Set(p??i(this,L));return this.options.throwOnError&&x.add("error"),Object.keys(i(this,m)).some(D=>{const C=D;return i(this,m)[C]!==e[C]&&x.has(C)})};(t==null?void 0:t.listeners)!==!1&&u()&&(a.listeners=!0),f(this,K,jt).call(this,{...a,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&f(this,k,st).call(this)}},b=new WeakMap,o=new WeakMap,A=new WeakMap,m=new WeakMap,T=new WeakMap,F=new WeakMap,g=new WeakMap,B=new WeakMap,U=new WeakMap,P=new WeakMap,w=new WeakMap,I=new WeakMap,S=new WeakMap,L=new WeakMap,Q=new WeakSet,M=function(t){f(this,z,nt).call(this);let e=i(this,o).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(Tt)),e},N=new WeakSet,$=function(){if(f(this,V,it).call(this),pt||i(this,m).isStale||!mt(this.options.staleTime))return;const e=wt(i(this,m).dataUpdatedAt,this.options.staleTime)+1;l(this,w,setTimeout(()=>{i(this,m).isStale||this.updateResult()},e))},H=new WeakSet,tt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,o)):this.options.refetchInterval)??!1},_=new WeakSet,et=function(t){f(this,W,rt).call(this),l(this,S,t),!(pt||this.options.enabled===!1||!mt(i(this,S))||i(this,S)===0)&&l(this,I,setInterval(()=>{(this.options.refetchIntervalInBackground||It.isFocused())&&f(this,Q,M).call(this)},i(this,S)))},k=new WeakSet,st=function(){f(this,N,$).call(this),f(this,_,et).call(this,f(this,H,tt).call(this))},V=new WeakSet,it=function(){i(this,w)&&(clearTimeout(i(this,w)),l(this,w,void 0))},W=new WeakSet,rt=function(){i(this,I)&&(clearInterval(i(this,I)),l(this,I,void 0))},z=new WeakSet,nt=function(){const t=i(this,b).getQueryCache().build(i(this,b),this.options);if(t===i(this,o))return;const e=i(this,o);l(this,o,t),l(this,A,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},K=new WeakSet,jt=function(t){Ct.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(i(this,m))}),i(this,b).getQueryCache().notify({query:i(this,o),type:"observerResultsUpdated"})})},Rt);function zt(s,t){return t.enabled!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function gt(s,t){return zt(s,t)||s.state.data!==void 0&&at(s,t,t.refetchOnMount)}function at(s,t,e){if(t.enabled!==!1){const r=typeof e=="function"?e(s):e;return r==="always"||r!==!1&&ot(s,t)}return!1}function xt(s,t,e,r){return(s!==t||r.enabled===!1)&&(!e.suspense||s.state.status!=="error")&&ot(s,e)}function ot(s,t){return t.enabled!==!1&&s.isStaleByTime(t.staleTime)}function Kt(s,t){return!Z(s.getCurrentResult(),t)}var Ot=R.createContext(!1),Jt=()=>R.useContext(Ot);Ot.Provider;function qt(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Gt=R.createContext(qt()),Xt=()=>R.useContext(Gt);function Yt(s,t){return typeof s=="function"?s(...t):!!s}var Zt=(s,t)=>{(s.suspense||s.throwOnError)&&(t.isReset()||(s.retryOnMount=!1))},$t=s=>{R.useEffect(()=>{s.clearReset()},[s])},te=({result:s,errorResetBoundary:t,throwOnError:e,query:r})=>s.isError&&!t.isReset()&&!s.isFetching&&r&&Yt(e,[s.error,r]),ee=s=>{s.suspense&&typeof s.staleTime!="number"&&(s.staleTime=1e3)},se=(s,t)=>(s==null?void 0:s.suspense)&&t.isPending,ie=(s,t,e)=>t.fetchOptimistic(s).catch(()=>{e.clearReset()});function re(s,t,e){const r=Dt(e),a=Jt(),u=Xt(),c=r.defaultQueryOptions(s);c._optimisticResults=a?"isRestoring":"optimistic",ee(c),Zt(c,u),$t(u);const[p]=R.useState(()=>new t(r,c)),x=p.getOptimisticResult(c);if(R.useSyncExternalStore(R.useCallback(D=>{const C=a?()=>{}:p.subscribe(Ct.batchCalls(D));return p.updateResult(),C},[p,a]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),R.useEffect(()=>{p.setOptions(c,{listeners:!1})},[c,p]),se(c,x))throw ie(c,p,u);if(te({result:x,errorResetBoundary:u,throwOnError:c.throwOnError,query:r.getQueryCache().get(c.queryHash)}))throw x.error;return c.notifyOnChangeProps?x:p.trackResult(x)}function ne(s,t){return re(s,Wt,t)}const qe=({auth:s})=>{const{data:t,status:e,refetch:r}=ne({queryKey:["data"],queryFn:async()=>(await Ft.get("/staffs/all")).data,refetchInterval:6e4,staleTime:1e4});return n.jsx(_t,{user:s.user,children:n.jsxs(Ut,{children:[n.jsx(Pt,{children:n.jsxs("div",{className:"flex justify-between items-center gap-5 flow-col flex-wrap",children:[n.jsx("div",{children:n.jsx(Lt,{children:"Our Officials"})}),n.jsx(kt,{refetch:r})]})}),n.jsx(Mt,{children:n.jsxs(At,{children:[n.jsxs(Bt,{children:["Total Staffs: ",e==="success"?t==null?void 0:t.length:"Loading..."]}),n.jsx(Nt,{children:n.jsxs(vt,{children:[n.jsx(j,{}),n.jsx(j,{children:"ID"}),n.jsx(j,{children:"Name"}),n.jsx(j,{children:"Phone"}),n.jsx(j,{children:"Joining Date"}),n.jsx(j,{children:"Position"}),n.jsx(j,{children:"Status"}),n.jsx(j,{})]})}),n.jsx(Ht,{children:t==null?void 0:t.map(a=>n.jsxs(vt,{children:[n.jsx(O,{children:n.jsx("img",{src:a.photo,className:"w-14 h-14 object-cover rounded-full border-2 border-primary p-0.5"})}),n.jsx(O,{children:a.id}),n.jsx(O,{children:a.name}),n.jsx(O,{children:a.phone}),n.jsx(O,{children:a.joining_date}),n.jsx(O,{children:a.position}),n.jsxs(O,{children:[" ",a.status=="active"?n.jsx(yt,{variant:"default",children:"Active"}):n.jsx(yt,{variant:"secondary",className:"text-muted-foreground",children:"Disabled"})]}),n.jsx(O,{children:n.jsx(Vt,{refetch:r,official:a})})]}))})]})})]})})};export{qe as default};
